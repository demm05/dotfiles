#!/bin/zsh

# --- Powerlevel10k Instant Prompt ---
# Enable Powerlevel10k instant prompt. Should stay close to the top of ~/.zshrc.
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

# Helper to source files if they exist
function source_if_exists() {
  if [[ -r "$1" ]]; then
    source "$1"
  fi
}

# --- 42 School Specific ---
if [[ "$HOST" == *"42london"* ]]; then
  source_if_exists "$HOME/.zsh/42-school.zsh"
fi

source_if_exists "$HOME/.zsh/10-options.zsh"
source_if_exists "$HOME/.zsh/20-oh-my.zsh"
source_if_exists "$HOME/.zsh/30-alias.zsh"
source_if_exists "$HOME/.zsh/40-init.zsh"

# --- Powerlevel10k Config ---
source_if_exists "$HOME/.p10k.zsh"

# --- External Tools ---
if (( $+commands[direnv] )); then
  eval "$(direnv hook zsh)"
fi